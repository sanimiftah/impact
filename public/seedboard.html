<!DOCTYPE html>
<html lang="en">
<head>
  <link href="output.css" rel="stylesheet">
  <link href="animations.css" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seedboard – Plant Your Idea</title>
</head>
<body class="font-sans bg-gray-50 text-gray-800 leading-relaxed">

  <section class="max-w-4xl mx-auto p-6">
    <header class="mb-6 text-center">
      <h2 class="text-2xl font-bold text-green-700">🌱 Seedboard – Plant Your Idea</h2>
      <p class="text-lg text-gray-700">Every idea is a seed. Let it grow.</p>
      <div class="flex justify-center space-x-4 mt-2">
        <a href="index.html" class="text-blue-500 hover:underline">← Back to Home</a>
        <a href="dashboard_enhanced.html" class="text-purple-500 hover:underline">📊 Back to Dashboard</a>
      </div>
    </header>

    <!-- Success Message -->
    <div id="successMessage" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
      <strong>Success!</strong> Your idea has been planted! 🌱
    </div>

    <!-- Idea Submission Form -->
    <form id="ideaForm" class="bg-green-50 p-6 rounded-lg shadow-md space-y-4 mb-8">
      <div>
        <label for="ideaTitle" class="block font-medium text-gray-700">Title of Idea:</label>
        <input type="text" id="ideaTitle" name="ideaTitle" class="w-full border border-gray-300 rounded p-2" required />
      </div>

      <div>
        <label for="ideaDescription" class="block font-medium text-gray-700">Description:</label>
        <textarea id="ideaDescription" name="ideaDescription" rows="4" class="w-full border border-gray-300 rounded p-2" required></textarea>
      </div>

      <div>
        <label for="tone" class="block font-medium text-gray-700">Emotional Tone:</label>
        <select id="tone" name="tone" class="w-full border border-gray-300 rounded p-2">
          <option value="hopeful">Hopeful</option>
          <option value="urgent">Urgent</option>
          <option value="curious">Curious</option>
        </select>
      </div>

      <div>
        <label for="tags" class="block font-medium text-gray-700">Tags:</label>
        <input type="text" id="tags" name="tags" placeholder="e.g., education, climate" class="w-full border border-gray-300 rounded p-2" />
      </div>

      <div>
        <label for="location" class="block font-medium text-gray-700">Location (optional):</label>
        <input type="text" id="location" name="location" class="w-full border border-gray-300 rounded p-2" />
      </div>

      <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">
        🌱 Submit Idea
      </button>
    </form>

    <!-- Filter Bar -->
    <aside class="bg-gray-100 p-4 rounded-lg shadow-md mt-8 flex gap-4 flex-wrap">
      <div>
        <label for="filterTone" class="block font-medium text-gray-700">🌿 Filter by Emotional Tone:</label>
        <select id="filterTone" class="border border-gray-300 rounded p-2">
          <option value="">All</option>
          <option value="hopeful">Hopeful</option>
          <option value="urgent">Urgent</option>
          <option value="curious">Curious</option>
        </select>
      </div>
    </aside>

    <!-- Submitted Ideas -->
    <section id="ideaList" class="mt-10 space-y-6">
      <h3 class="text-xl font-semibold text-green-700 mb-4">🌾 Ideas Growing</h3>
      <!-- Ideas will be injected here -->
    </section>
  </section>

  <!-- JavaScript for localStorage and rendering -->
  <script>
    const ideaForm = document.getElementById('ideaForm');
    const ideaList = document.getElementById('ideaList');
    const filterTone = document.getElementById('filterTone');
    const successMessage = document.getElementById('successMessage');

    let ideas = JSON.parse(localStorage.getItem('impactIdeas')) || [];

    // Initial render
    renderIdeas();

    // Handle form submission
    ideaForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const title = document.getElementById('ideaTitle').value;
      const description = document.getElementById('ideaDescription').value;
      const tone = document.getElementById('tone').value;
      const tags = document.getElementById('tags').value;
      const location = document.getElementById('location').value;

      const newIdea = { 
        title, 
        description, 
        tone, 
        tags, 
        location,
        id: Date.now(),
        date: new Date().toLocaleDateString()
      };
      
      ideas.push(newIdea);
      localStorage.setItem('impactIdeas', JSON.stringify(ideas));
      
      // Show success message
      successMessage.classList.remove('hidden');
      setTimeout(() => {
        successMessage.classList.add('hidden');
      }, 3000);
      
      ideaForm.reset();
      renderIdeas();
    });

    // Handle tone filtering
    filterTone.addEventListener('change', renderIdeas);

    // Render ideas to the DOM
    function renderIdeas() {
      const h3 = ideaList.querySelector('h3');
      ideaList.innerHTML = '';
      ideaList.appendChild(h3);

      const toneColor = {
        hopeful: 'bg-blue-100 text-blue-700',
        urgent: 'bg-red-100 text-red-700',
        curious: 'bg-yellow-100 text-yellow-700'
      };

      const filtered = filterTone.value
        ? ideas.filter(idea => idea.tone === filterTone.value)
        : ideas;

      if (filtered.length === 0) {
        const emptyState = document.createElement('div');
        emptyState.className = 'text-center py-8 text-gray-500';
        emptyState.innerHTML = `
          <div class="text-4xl mb-2">🌱</div>
          <p>No ideas yet. Be the first to plant a seed!</p>
        `;
        ideaList.appendChild(emptyState);
        return;
      }

      filtered.forEach(idea => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow-md p-4 transition transform hover:scale-[1.02] hover:shadow-lg';

        const tagChips = idea.tags
          ? idea.tags.split(',').map(tag => `<span class="bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full">${tag.trim()}</span>`).join(' ')
          : '<span class="text-gray-400">No tags</span>';

        card.innerHTML = `
          <div class="flex items-center justify-between mb-2">
            <span class="text-xs font-semibold px-2 py-1 rounded-full ${toneColor[idea.tone]}">
              ${idea.tone.charAt(0).toUpperCase() + idea.tone.slice(1)}
            </span>
            <span class="text-xs text-gray-400">${idea.date}</span>
          </div>

          <h4 class="font-bold text-green-700 text-lg">${idea.title}</h4>
          <p class="text-sm text-gray-600 mt-1">${idea.description}</p>

          <div class="mt-2 flex flex-wrap gap-2">
            ${tagChips}
          </div>

          <p class="text-xs text-gray-500 mt-2">📍 ${idea.location || 'Location not specified'}</p>

          <div class="mt-3 flex gap-2">
            <button class="bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded text-sm support-btn">💚 Support</button>
            <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-3 rounded text-sm save-btn">💾 Save</button>
          </div>
        `;

        // Support functionality
        const supportBtn = card.querySelector('.support-btn');
        supportBtn.addEventListener('click', () => {
          supportBtn.innerHTML = '✅ Supported!';
          supportBtn.disabled = true;
          supportBtn.className = 'bg-green-600 text-white py-1 px-3 rounded text-sm cursor-not-allowed';
        });

        // Save for Later functionality
        const saveBtn = card.querySelector('.save-btn');
        saveBtn.addEventListener('click', () => {
          let saved = JSON.parse(localStorage.getItem('savedIdeas')) || [];

          const alreadySaved = saved.some(savedIdea =>
            savedIdea.id === idea.id
          );

          if (!alreadySaved) {
            saved.push(idea);
            localStorage.setItem('savedIdeas', JSON.stringify(saved));
            saveBtn.innerHTML = '✅ Saved!';
            saveBtn.disabled = true;
            saveBtn.className = 'bg-gray-400 text-white py-1 px-3 rounded text-sm cursor-not-allowed';
          } else {
            alert('✅ This idea is already saved.');
          }
        });

        ideaList.appendChild(card);
      });
    }

    // Enhanced visual features for Seedboard
    document.addEventListener('DOMContentLoaded', function() {
      // Add UI components
      if (typeof showLoading !== 'function') {
        window.showLoading = function(message) {
          const loading = document.createElement('div');
          loading.id = 'loadingOverlay';
          loading.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
          loading.innerHTML = `
            <div class="bg-white p-6 rounded-lg shadow-xl text-center">
              <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"></div>
              <p class="text-gray-700">${message}</p>
            </div>
          `;
          document.body.appendChild(loading);
        };

        window.hideLoading = function() {
          const loading = document.getElementById('loadingOverlay');
          if (loading) loading.remove();
        };

        window.showToast = function(message, type = 'success') {
          const toast = document.createElement('div');
          toast.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 ${
            type === 'success' ? 'bg-green-500 text-white' : 
            type === 'warning' ? 'bg-yellow-500 text-white' : 
            'bg-blue-500 text-white'
          }`;
          toast.textContent = message;
          document.body.appendChild(toast);
          
          setTimeout(() => toast.classList.remove('translate-x-full'), 100);
          setTimeout(() => {
            toast.classList.add('translate-x-full');
            setTimeout(() => toast.remove(), 300);
          }, 3000);
        };
      }

      // Add enhanced form animations
      const formInputs = document.querySelectorAll('#ideaForm input, #ideaForm textarea, #ideaForm select');
      formInputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.classList.add('ring-2', 'ring-green-200');
          this.classList.add('transform', 'scale-105');
        });
        input.addEventListener('blur', function() {
          this.parentElement.classList.remove('ring-2', 'ring-green-200');
          this.classList.remove('transform', 'scale-105');
        });
      });

      // Enhanced form submission
      const ideaForm = document.getElementById('ideaForm');
      const originalSubmit = ideaForm.onsubmit;
      ideaForm.onsubmit = function(e) {
        e.preventDefault();
        showLoading('Planting your brilliant idea... 🌱');
        
        setTimeout(() => {
          hideLoading();
          if (originalSubmit) originalSubmit.call(this, e);
          showToast('🌱 Your idea has been planted and is ready to grow! Others can now discover and build upon it.', 'success');
        }, 1200);
      };

      // Add micro-interactions to idea cards
      function enhanceIdeaCards() {
        const ideaCards = document.querySelectorAll('.bg-white.p-4.rounded-lg');
        ideaCards.forEach(card => {
          card.classList.add('card-hover', 'transition-all', 'duration-300');
          
          // Add category-based visual indicators
          const category = card.querySelector('strong:last-child')?.textContent;
          if (category) {
            const categoryColors = {
              'Environment': 'border-l-4 border-green-500',
              'Education': 'border-l-4 border-blue-500',
              'Healthcare': 'border-l-4 border-red-500',
              'Technology': 'border-l-4 border-purple-500',
              'Community': 'border-l-4 border-yellow-500'
            };
            const colorClass = categoryColors[category] || 'border-l-4 border-gray-500';
            card.className += ' ' + colorClass;
          }

          // Add growth animation to new ideas
          if (card.style.opacity === '' || card.style.opacity === '1') {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
              card.style.transition = 'all 0.5s ease';
              card.style.opacity = '1';
              card.style.transform = 'translateY(0)';
            }, Math.random() * 500);
          }
        });
      }

      // Enhanced save functionality
      window.originalSaveIdea = window.saveIdea;
      window.saveIdea = function(idea) {
        showLoading('Saving idea to your garden...');
        setTimeout(() => {
          hideLoading();
          originalSaveIdea(idea);
          showToast('💾 Idea saved! You can find it in your saved collection.', 'success');
        }, 800);
      };

      // Auto-refresh with animations
      const originalDisplayIdeas = window.displayIdeas;
      window.displayIdeas = function() {
        originalDisplayIdeas();
        setTimeout(enhanceIdeaCards, 100);
      };

      // Initial enhancement
      setTimeout(enhanceIdeaCards, 500);
    });
  </script>
  <script src="ui-components.js"></script>
</body>
</html>
      });
    }
  </script>
</body>
</html>
